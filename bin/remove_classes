#!/usr/bin/env ruby

if ARGV.empty?
  puts "Usage: bin/remove_classes <erb_file>"
  exit 1
end

file_path = ARGV[0]

unless File.exist?(file_path)
  puts "Error: File '#{file_path}' not found"
  exit 1
end

content = File.read(file_path)

# Remove class: attributes with their values
# This regex matches:
# - class: followed by optional whitespace
# - Either quoted string (single or double quotes) or unquoted content
# - Handles nested quotes and complex class values
modified_content = content.gsub(/\bclass:\s*(?:"[^"]*"|'[^']*'|[^,\s)]+)(?:\s*,\s*)?/, 'class: ""')

# Clean up any trailing commas or extra spaces that might remain
modified_content = modified_content.gsub(/,\s*\)/, ')')
modified_content = modified_content.gsub(/\(\s*,/, '(')

File.write(file_path, modified_content)

puts "Removed class attributes from #{file_path}"
