<%= tag.svg(width: width, height: height, "viewBox": "0 0 #{width} #{height}") do %>
  <%= tag.g do %>
    <%= tag.rect(x: 0, y: 0, width: width, height: height, fill: background_color) %>
  <% end %>

  <%= tag.g(transform: "translate(#{window.step_offset}, #{window.y_offset})") do %>
    <%= tag.rect(x: 0, y: 0, width: window.margin, height: window.height, fill: "#ff0000", "fill-opacity": 0.35) if debug %>

    <%= render BarChart::ScaleComponent.with_collection(scales, window:, ceiling:) %>
  <% end %>

  <%= tag.g(transform: "translate(#{window.x_offset}, #{window.y_offset})") do %>
    <%= tag.rect(x: 0, y: 0, width: window.width, height: window.height, fill: "#ff0000", "fill-opacity": 0.25) if debug %>

    <%= render BarChart::TickComponent.with_collection(ticks, window:, ceiling:) %>
  <% end %>
<% end %>
